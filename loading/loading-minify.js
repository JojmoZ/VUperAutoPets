document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".parallax-layer"),t=document.getElementById("loading-fill");localStorage.removeItem("ingame");const a=Date.now(),n=["Kalau melawan tantangan yang tinggi, jangan menyerah!","Nenek gua sakit sakitan masih bisa diamond push up","KR rugi 7 juta masih lanjut hidup","Kalo tersedak, spam mewing","BP gk selesai CUT!","Kenapa lu masih idup? buat nyerah gitu aja?","Skibidi adalah kunci kesuksesan, Ilang emas kunci kejatuhan","Kenapa sangat serius","Aku melihat banyak sekali ampas","Lu pada ninja-ninja mending berdiri","I see lots of prey","Kelarin bp guys!","Rataa ya guys","Solid Solid Solid!","Hati hati besok ilang","Nikmatkan Waktu Bersama selama masi ada","Selesai gk case KKrime.Net","Selesai gk case Krusty bAke?","Selesai gk case GoaThub?","Selesai gk case ScanVision?","Selesai gk case VilLter?","Selesai gk case NieR:CaroluM?","Diam dan Di cut, milik dia yang tak bisa berdiri","Satu dua semut-semut, hati hati kena cut","Panda aja bisa handstand, masa klian gk bs selesaiin bp?","Tenang malam masih panjang","Subco kalian anggap badut?","Subco WD emang badut","Subco DB emang badut","Subco Java emang badut","Subco C emang badut","Jangan Sampe ketauan COPAS","Jangan Budayakan Menyontek ya guys","Jangan Sampe kalo ditanya gk ngerti!","Subco ComVis emang badut","Sudah Siap Network???","一二三四五六七， 你的朋友在哪里？","Kayaknya perlu extend deh..."],o=document.querySelector(".main-content");let s;try{if(s=JSON.parse(localStorage.getItem("ownedAnimals")),!Array.isArray(s)||!s.length)throw new Error("Invalid data")}catch(e){s=[{name:"VUnt",img:"../assets/Animals/VUnt.webp"},{name:"caKRbara",img:"../assets/Animals/caKRbara.webp"}]}const i=s;const l=[];function r(e,t,a){return!(e.right+a<t.left-a||e.left-a>t.right+a||e.bottom+a<t.top-a||e.top-a>t.bottom+a)}document.body.style.overflow="hidden",setInterval((function(){const e=Date.now()-a,n=Math.min(e/2e4*100,100);t.style.width=`${n}%`,e>=2e4&&function(){if(document.querySelector(".overlay"))return;const e=document.createElement("div");e.classList.add("overlay"),document.body.appendChild(e);const t=document.createElement("img");t.src="../assets/title-logo.png",t.classList.add("logo"),e.appendChild(t),setTimeout((()=>{e.classList.add("fade-in-overlay"),t.classList.add("fade-in-logo"),setTimeout((()=>{window.location.href="/game/game.html"}),5e3)}),100)}()}),100),setInterval((function(){if(window.pageYOffset+window.innerHeight<document.body.scrollHeight)return;const e=n[Math.floor(Math.random()*n.length)],t=i[Math.floor(Math.random()*i.length)],a=document.createElement("div");a.className="tip",a.textContent=e;const s=document.createElement("img");s.src=t.img,s.alt=t.name,s.className="animal";let d,m,c,u,g=0;do{d=70*Math.random()+10,m=80*Math.random()+10,c=m<30?"left":m>70?"right":"center",a.style.position="absolute",a.style.top=`${d}%`,a.style.left=`${m}%`,a.style.right="auto",a.style.transform="none",s.style.position="absolute",s.style.top="60%","left"===c?(a.style.left=`${m}%`,a.style.right="auto",a.style.flexDirection="row-reverse",s.style.left="-3.125rem",s.classList.add("mirror")):"right"===c?(a.style.right=100-m+"%",a.style.left="auto",s.style.right="-3.125rem",a.style.flexDirection="row"):(a.style.left="50%",a.style.transform="translateX(-50%)",s.style.right="-3.125rem",a.style.flexDirection="row"),o.appendChild(a),u=a.getBoundingClientRect(),o.removeChild(a);if(!localStorage.getItem("loggedin")){function p(){const e=["users"];Object.keys(localStorage).forEach((t=>{e.includes(t)||localStorage.removeItem(t)}))}p(),window.location.href="/login/index.html"}if(!l.some((e=>r(e,u,20))))break;g++,console.log(`Attempt ${g}: Overlap detected, retrying...`)}while(g<20);if(g<20){a.appendChild(s),o.appendChild(a);const h=a.getBoundingClientRect();l.push(h),setTimeout((()=>{a.classList.add("tip-animate-in")}),100),setTimeout((()=>{a.classList.remove("tip-animate-in"),a.classList.add("tip-animate-out"),setTimeout((()=>{o.removeChild(a);const e=l.findIndex((e=>e===h));e>-1&&l.splice(e,1)}),500)}),5e3)}else console.warn("Max attempts reached; unable to place tip without overlap.")}),3e3),window.addEventListener("scroll",(()=>{const t=window.pageYOffset;e.forEach((e=>{const a=e.getAttribute("data-speed"),n=-t*a/100;e.style.transform=`translate3d(0px, ${n}px, 0px)`}))})),window.addEventListener("load",(()=>{setTimeout((()=>{const e=window.pageYOffset,t=o.offsetTop-e,a=performance.now();requestAnimationFrame((function n(o){const s=Math.min((o-a)/5e3,1);window.scrollTo(0,e+t*s),s<1?requestAnimationFrame(n):document.body.style.overflow="auto"}))}),3e3)}));const d=new Audio("../assets/sound/Super Auto Pets  - Menu Theme.mp3");d.volume=.08,d.loop=!0;const m=localStorage.getItem("backgroundAudioTime");m&&(d.currentTime=parseFloat(m));const c=()=>{d.play(),document.removeEventListener("click",c),document.removeEventListener("keydown",c),document.removeEventListener("mousemove",c),document.removeEventListener("scroll",c),document.removeEventListener("touchstart",c),document.removeEventListener("focus",c),document.removeEventListener("mousedown",c),document.removeEventListener("mouseup",c)};document.addEventListener("click",c),document.addEventListener("keydown",c),document.addEventListener("mousemove",c),document.addEventListener("scroll",c),document.addEventListener("touchstart",c),document.addEventListener("focus",c),document.addEventListener("mousedown",c),document.addEventListener("mouseup",c)}));