<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple CAPTCHA</title>
    <style>
        /* Basic styling for CAPTCHA */
        #captcha-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
            font-family: Arial, sans-serif;
        }

        canvas {
            border: 1px solid #ccc;
        }

        .refresh-button {
            cursor: pointer;
            margin-left: 10px;
            color: blue;
            text-decoration: underline;
        }
    </style>
</head>

<body>

    <div id="captcha-container">
        <canvas id="captcha" width="150" height="50"></canvas>
        <div class="refresh-button" onclick="generateCaptcha()">Refresh</div>
    </div>

    <script>
        function generateCaptcha() {
            const canvas = document.getElementById('captcha');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Background distortion effect
            ctx.fillStyle = '#f0f0f0';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Randomly generate text for the captcha
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            const captchaText = Array.from({ length: 5 })
                .map(() => chars[Math.floor(Math.random() * chars.length)])
                .join('');

            // Draw each character with random rotation and position
            ctx.font = '30px Arial';
            ctx.fillStyle = '#000';
            for (let i = 0; i < captchaText.length; i++) {
                ctx.save();
                const x = 20 + i * 25;
                const y = 35 + Math.random() * 10;
                ctx.translate(x, y);
                ctx.rotate((Math.random() - 0.5) * 0.3); // Random rotation
                ctx.fillText(captchaText[i], 0, 0);
                ctx.restore();
            }

            // Add noise (lines and dots)
            for (let i = 0; i < 10; i++) {
                ctx.strokeStyle = '#c0c0c0';
                ctx.beginPath();
                ctx.moveTo(Math.random() * canvas.width, Math.random() * canvas.height);
                ctx.lineTo(Math.random() * canvas.width, Math.random() * canvas.height);
                ctx.stroke();
            }
            for (let i = 0; i < 30; i++) {
                ctx.fillStyle = '#c0c0c0';
                ctx.beginPath();
                ctx.arc(Math.random() * canvas.width, Math.random() * canvas.height, 1, 0, 2 * Math.PI);
                ctx.fill();
            }
        }

        // Initialize CAPTCHA on page load
        window.onload = generateCaptcha;
    </script>

</body>

</html>